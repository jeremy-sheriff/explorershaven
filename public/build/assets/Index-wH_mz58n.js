import{f as ce,X as A,_ as we}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cpp2COfa.js";import{d as Ve}from"./index-C4J_hXM0.js";import{d as Se,f as j,g as z,i as R,j as Q,c as f,a as s,u as e,h as Ce,w as d,b as r,t as n,k as _,l as o,o as i,m as V,F as S,r as P,e as W,p as H}from"./app-CSOccYzD.js";import{_ as w}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-9GR4lIV-.js";import{_ as Y,a as Z,b as ee,c as te,d as se}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Da_gB5YK.js";import{_ as ae,a as de}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BhnJhsuo.js";import{_ as v,a as b,b as k,c,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-CoZuLexq.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-DBJcJw0m.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-BGSuMsof.js";import{c as Pe}from"./createLucideIcon-G_qJZ_sj.js";import"./index-yeZ4sm_h.js";import"./VisuallyHidden-CF2_zb5P.js";import"./useForwardExpose-C3p47je3.js";import"./useForwardPropsEmits-B6N0kNfR.js";import"./check-BcLucOZU.js";import"./useFormControl-CoGyOQJI.js";const Fe=Pe("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),$e={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},Ae={class:"grid auto-rows-min gap-4 md:grid-cols-4"},Ue={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},De={class:"text-2xl font-bold"},Ee={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},Te={class:"text-2xl font-bold"},Le={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},Be={class:"text-2xl font-bold"},Ne={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},Ie={class:"text-2xl font-bold text-green-600 dark:text-green-400"},je={class:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 bg-white md:min-h-min dark:border-sidebar-border dark:bg-sidebar"},he={class:"p-6"},Ge={class:"mb-4 flex items-center justify-between"},Ke={class:"flex gap-2"},Oe={key:0,class:"ml-1 rounded-full bg-primary px-2 py-0.5 text-xs text-primary-foreground"},ze={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-sidebar-accent"},Re={class:"mb-4 flex items-center justify-between"},He={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Xe={class:"grid gap-2"},qe={class:"grid gap-2"},Je={class:"grid gap-2"},Me={class:"grid gap-2"},Qe={class:"grid gap-2"},We={class:"grid gap-2"},Ye={class:"grid gap-2"},Ze={class:"grid gap-2"},et={class:"mt-4 flex justify-end gap-2"},tt={key:1,class:"mb-4 flex flex-wrap gap-2"},st={key:0,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},at={key:1,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},dt={key:2,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},lt={key:3,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},rt={key:4,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},ot={key:5,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},nt={class:"overflow-x-auto"},it={class:"min-w-full divide-y divide-gray-200"},ut={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-sidebar"},mt={class:"whitespace-nowrap px-6 py-4 text-sm font-medium"},ft={class:"whitespace-nowrap px-6 py-4 text-sm"},pt={class:"whitespace-nowrap px-6 py-4 text-sm"},_t={class:"whitespace-nowrap px-6 py-4 text-sm font-semibold"},gt={class:"whitespace-nowrap px-6 py-4 text-sm"},xt={key:0,class:"font-semibold text-orange-600 dark:text-orange-400"},yt={key:1,class:"font-semibold text-green-600 dark:text-green-400"},vt={class:"whitespace-nowrap px-6 py-4 text-sm"},bt={class:"whitespace-nowrap px-6 py-4 text-sm"},kt={class:"whitespace-nowrap px-6 py-4 text-right"},ct={class:"flex items-center justify-end gap-2"},wt={key:0,class:"py-12 text-center"},Vt={class:"grid gap-4 py-4"},St={class:"grid gap-2"},Ct={key:0,class:"text-sm text-red-600"},Pt={key:1,class:"rounded-lg bg-green-50 p-3 dark:bg-green-900/20"},Ft={class:"text-sm font-medium text-green-800 dark:text-green-200"},$t={class:"grid gap-2"},At={key:0,class:"text-xs text-muted-foreground"},Ut={key:1,class:"text-sm text-red-600"},Dt={class:"grid gap-4 sm:grid-cols-2"},Et={class:"grid gap-2"},Tt={key:0,class:"text-sm text-red-600"},Lt={class:"grid gap-2"},Bt={key:0,class:"text-sm text-red-600"},Nt={class:"grid gap-2"},It={key:0,class:"text-sm text-red-600"},jt={class:"grid gap-4 py-4"},ht={class:"grid gap-2"},Gt={key:0,class:"text-sm text-red-600"},Kt={key:1,class:"rounded-lg bg-green-50 p-3 dark:bg-green-900/20"},Ot={class:"text-sm font-medium text-green-800 dark:text-green-200"},zt={class:"grid gap-2"},Rt={key:0,class:"text-xs text-muted-foreground"},Ht={key:1,class:"text-sm text-red-600"},Xt={class:"grid gap-4 sm:grid-cols-2"},qt={class:"grid gap-2"},Jt={key:0,class:"text-sm text-red-600"},Mt={class:"grid gap-2"},Qt={key:0,class:"text-sm text-red-600"},Wt={class:"grid gap-2"},Yt={key:0,class:"text-sm text-red-600"},gs=Se({__name:"Index",props:{payments:{},students:{},fees:{},credits:{},grades:{},terms:{},filters:{}},setup(le){const y=le,F=y.payments||[],U=y.students||[],D=y.fees||[],X=y.credits||{},q=y.grades||[],re=y.terms||[],L=j(!1),B=j(!1),h=j(null),T=j(!1),l=z({grade:y.filters?.grade||"all",term:y.filters?.term||"all",status:y.filters?.status||"all",student:y.filters?.student||"all",date_from:y.filters?.date_from||"",date_to:y.filters?.date_to||"",has_balance:y.filters?.has_balance||"all",sort_balance:y.filters?.sort_balance||"all"}),oe=[{title:"Dashboard",href:Ve().url},{title:"Fee Payments",href:ce.index.url}],p=z({student_id:"",fee_id:"",amount_paid:"",payment_date:new Date().toISOString().split("T")[0],status:"pending"}),m=z({student_id:"",fee_id:"",amount_paid:"",payment_date:"",status:""}),G=()=>{p.reset(),p.payment_date=new Date().toISOString().split("T")[0]},J=()=>{m.reset()},ne=()=>{G(),L.value=!0},ie=()=>{p.post("/fee-payments",{onSuccess:()=>{L.value=!1,G()}})},ue=u=>{const t=F.find(a=>a.id===u);t&&(h.value=t.id,m.student_id=t.student_id.toString(),m.fee_id=t.fee_id.toString(),m.amount_paid=t.amount_paid.toString(),m.payment_date=t.payment_date,m.status=t.status,B.value=!0)},me=()=>{h.value&&m.put(`/fee-payments/${h.value}`,{onSuccess:()=>{B.value=!1,J()}})},fe=u=>{confirm("Are you sure you want to delete this payment?")&&H.delete(`/fee-payments/${u}`)},$=()=>{const u={};l.grade&&l.grade!=="all"&&(u.grade=l.grade),l.term&&l.term!=="all"&&(u.term=l.term),l.status&&l.status!=="all"&&(u.status=l.status),l.student&&l.student!=="all"&&(u.student=l.student),l.date_from&&(u.date_from=l.date_from),l.date_to&&(u.date_to=l.date_to),l.has_balance&&l.has_balance!=="all"&&(u.has_balance=l.has_balance),l.sort_balance&&l.sort_balance!=="all"&&(u.sort_balance=l.sort_balance),H.get("/fee-payments",u,{preserveState:!1,preserveScroll:!1,only:["payments","filters"]})},M=()=>{l.grade="all",l.term="all",l.status="all",l.student="all",l.date_from="",l.date_to="",l.has_balance="all",l.sort_balance="all",H.get("/fee-payments",{},{preserveState:!1,preserveScroll:!1})},N=R(()=>!!(l.grade&&l.grade!=="all"||l.term&&l.term!=="all"||l.status&&l.status!=="all"||l.student&&l.student!=="all"||l.date_from||l.date_to||l.has_balance&&l.has_balance!=="all"||l.sort_balance&&l.sort_balance!=="all")),C=u=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(u),pe=u=>u?new Date(u).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}):"Not paid",_e=u=>{const t={paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",partial:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",pending:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return t[u]||t.pending},ge=F.reduce((u,t)=>u+parseFloat(t.amount_paid||0),0),xe=F.filter(u=>u.status==="paid").length,ye=F.filter(u=>u.status==="pending").length,ve=R(()=>{if(!p.student_id)return D;const u=U.find(t=>t.id.toString()===p.student_id);return!u||!u.grade_id?D:D.filter(t=>t.grade_id===u.grade_id)}),be=R(()=>{if(!m.student_id)return D;const u=U.find(t=>t.id.toString()===m.student_id);return!u||!u.grade_id?D:D.filter(t=>t.grade_id===u.grade_id)});Q(()=>p.student_id,()=>{p.fee_id=""}),Q(()=>m.student_id,()=>{m.fee_id=""});const I=u=>(X[u]||[]).reduce((K,O)=>K+parseFloat(O.amount||0),0),ke=Object.values(X).flat().reduce((u,t)=>u+parseFloat(t.amount||0),0);return(u,t)=>(i(),f(S,null,[s(e(Ce),{title:"Fee Payments"}),s(we,{breadcrumbs:oe},{default:d(()=>[r("div",$e,[r("div",Ae,[r("div",Ue,[t[32]||(t[32]=r("div",{class:"text-sm font-medium text-muted-foreground"},"Total Payments",-1)),r("div",De,n(e(F).length),1)]),r("div",Ee,[t[33]||(t[33]=r("div",{class:"text-sm font-medium text-muted-foreground"},"Total Collected",-1)),r("div",Te,n(C(e(ge))),1)]),r("div",Le,[t[34]||(t[34]=r("div",{class:"text-sm font-medium text-muted-foreground"},"Paid / Pending",-1)),r("div",Be,n(e(xe))+" / "+n(e(ye)),1)]),r("div",Ne,[t[35]||(t[35]=r("div",{class:"text-sm font-medium text-muted-foreground"},"Available Credits",-1)),r("div",Ie,n(C(e(ke))),1)])]),r("div",je,[r("div",he,[r("div",Ge,[t[37]||(t[37]=r("h2",{class:"text-xl font-semibold"},"Fee Payments",-1)),r("div",Ke,[s(e(w),{variant:"outline",onClick:t[0]||(t[0]=a=>T.value=!T.value),class:"gap-2"},{default:d(()=>[s(e(Fe),{class:"h-4 w-4"}),t[36]||(t[36]=o(" Filters ",-1)),N.value?(i(),f("span",Oe," Active ")):_("",!0)]),_:1}),r("button",{onClick:ne,class:"rounded-lg bg-black px-4 py-2 text-sm font-medium text-white hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200"}," + Record Payment ")])]),T.value?(i(),f("div",ze,[r("div",Re,[t[39]||(t[39]=r("h3",{class:"font-semibold"},"Filter Payments",-1)),N.value?(i(),V(e(w),{key:0,variant:"ghost",size:"sm",onClick:M,class:"gap-2 text-red-600 hover:text-red-700"},{default:d(()=>[s(e(A),{class:"h-4 w-4"}),t[38]||(t[38]=o(" Clear All ",-1))]),_:1})):_("",!0)]),r("div",He,[r("div",Xe,[s(e(x),null,{default:d(()=>[...t[40]||(t[40]=[o("Grade",-1)])]),_:1}),s(e(v),{modelValue:e(l).grade,"onUpdate:modelValue":t[1]||(t[1]=a=>e(l).grade=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"All Grades"})]),_:1}),s(e(c),null,{default:d(()=>[s(e(g),{value:"all"},{default:d(()=>[...t[41]||(t[41]=[o("All Grades",-1)])]),_:1}),(i(!0),f(S,null,P(e(q),a=>(i(),V(e(g),{key:a.id,value:a.id.toString()},{default:d(()=>[o(n(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),r("div",qe,[s(e(x),null,{default:d(()=>[...t[42]||(t[42]=[o("Term",-1)])]),_:1}),s(e(v),{modelValue:e(l).term,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).term=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"All Terms"})]),_:1}),s(e(c),null,{default:d(()=>[s(e(g),{value:"all"},{default:d(()=>[...t[43]||(t[43]=[o("All Terms",-1)])]),_:1}),(i(!0),f(S,null,P(e(re),a=>(i(),V(e(g),{key:a,value:a},{default:d(()=>[o(n(a),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),r("div",Je,[s(e(x),null,{default:d(()=>[...t[44]||(t[44]=[o("Status",-1)])]),_:1}),s(e(v),{modelValue:e(l).status,"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).status=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"All Statuses"})]),_:1}),s(e(c),null,{default:d(()=>[s(e(g),{value:"all"},{default:d(()=>[...t[45]||(t[45]=[o("All Statuses",-1)])]),_:1}),s(e(g),{value:"paid"},{default:d(()=>[...t[46]||(t[46]=[o("Paid",-1)])]),_:1}),s(e(g),{value:"partial"},{default:d(()=>[...t[47]||(t[47]=[o("Partial",-1)])]),_:1}),s(e(g),{value:"pending"},{default:d(()=>[...t[48]||(t[48]=[o("Pending",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",Me,[s(e(x),null,{default:d(()=>[...t[49]||(t[49]=[o("Student",-1)])]),_:1}),s(e(v),{modelValue:e(l).student,"onUpdate:modelValue":t[4]||(t[4]=a=>e(l).student=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"All Students"})]),_:1}),s(e(c),null,{default:d(()=>[s(e(g),{value:"all"},{default:d(()=>[...t[50]||(t[50]=[o("All Students",-1)])]),_:1}),(i(!0),f(S,null,P(e(U),a=>(i(),V(e(g),{key:a.id,value:a.id.toString()},{default:d(()=>[o(n(a.first_name)+" "+n(a.last_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),r("div",Qe,[s(e(x),{for:"date_from"},{default:d(()=>[...t[51]||(t[51]=[o("Date From",-1)])]),_:1}),s(e(E),{id:"date_from",modelValue:e(l).date_from,"onUpdate:modelValue":t[5]||(t[5]=a=>e(l).date_from=a),type:"date",class:"w-full"},null,8,["modelValue"])]),r("div",We,[s(e(x),{for:"date_to"},{default:d(()=>[...t[52]||(t[52]=[o("Date To",-1)])]),_:1}),s(e(E),{id:"date_to",modelValue:e(l).date_to,"onUpdate:modelValue":t[6]||(t[6]=a=>e(l).date_to=a),type:"date",class:"w-full"},null,8,["modelValue"])]),r("div",Ye,[s(e(x),null,{default:d(()=>[...t[53]||(t[53]=[o("Balance Status",-1)])]),_:1}),s(e(v),{modelValue:e(l).has_balance,"onUpdate:modelValue":t[7]||(t[7]=a=>e(l).has_balance=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"All"})]),_:1}),s(e(c),null,{default:d(()=>[s(e(g),{value:"all"},{default:d(()=>[...t[54]||(t[54]=[o("All",-1)])]),_:1}),s(e(g),{value:"yes"},{default:d(()=>[...t[55]||(t[55]=[o("Has Balance",-1)])]),_:1}),s(e(g),{value:"no"},{default:d(()=>[...t[56]||(t[56]=[o("Fully Paid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",Ze,[s(e(x),null,{default:d(()=>[...t[57]||(t[57]=[o("Sort by Balance",-1)])]),_:1}),s(e(v),{modelValue:e(l).sort_balance,"onUpdate:modelValue":t[8]||(t[8]=a=>e(l).sort_balance=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"Default"})]),_:1}),s(e(c),null,{default:d(()=>[s(e(g),{value:"all"},{default:d(()=>[...t[58]||(t[58]=[o("Default (Latest First)",-1)])]),_:1}),s(e(g),{value:"asc"},{default:d(()=>[...t[59]||(t[59]=[o("Balance: Low to High",-1)])]),_:1}),s(e(g),{value:"desc"},{default:d(()=>[...t[60]||(t[60]=[o("Balance: High to Low",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("div",et,[s(e(w),{variant:"outline",onClick:t[9]||(t[9]=a=>T.value=!1)},{default:d(()=>[...t[61]||(t[61]=[o(" Close ",-1)])]),_:1}),s(e(w),{onClick:$,disabled:e(l).processing},{default:d(()=>[...t[62]||(t[62]=[o(" Apply Filters ",-1)])]),_:1},8,["disabled"])])])):_("",!0),N.value&&!T.value?(i(),f("div",tt,[t[63]||(t[63]=r("span",{class:"text-sm text-muted-foreground"},"Active filters:",-1)),e(l).grade&&e(l).grade!=="all"?(i(),f("span",st,[o(" Grade: "+n(e(q).find(a=>a.id.toString()===e(l).grade)?.name)+" ",1),r("button",{onClick:t[10]||(t[10]=a=>{e(l).grade="all",$()}),class:"hover:text-red-600"},[s(e(A),{class:"h-3 w-3"})])])):_("",!0),e(l).term&&e(l).term!=="all"?(i(),f("span",at,[o(" Term: "+n(e(l).term)+" ",1),r("button",{onClick:t[11]||(t[11]=a=>{e(l).term="all",$()}),class:"hover:text-red-600"},[s(e(A),{class:"h-3 w-3"})])])):_("",!0),e(l).status&&e(l).status!=="all"?(i(),f("span",dt,[o(" Status: "+n(e(l).status)+" ",1),r("button",{onClick:t[12]||(t[12]=a=>{e(l).status="all",$()}),class:"hover:text-red-600"},[s(e(A),{class:"h-3 w-3"})])])):_("",!0),e(l).student&&e(l).student!=="all"?(i(),f("span",lt,[o(" Student: "+n(e(U).find(a=>a.id.toString()===e(l).student)?.first_name)+" ",1),r("button",{onClick:t[13]||(t[13]=a=>{e(l).student="all",$()}),class:"hover:text-red-600"},[s(e(A),{class:"h-3 w-3"})])])):_("",!0),e(l).date_from?(i(),f("span",rt,[o(" From: "+n(e(l).date_from)+" ",1),r("button",{onClick:t[14]||(t[14]=a=>{e(l).date_from="",$()}),class:"hover:text-red-600"},[s(e(A),{class:"h-3 w-3"})])])):_("",!0),e(l).date_to?(i(),f("span",ot,[o(" To: "+n(e(l).date_to)+" ",1),r("button",{onClick:t[15]||(t[15]=a=>{e(l).date_to="",$()}),class:"hover:text-red-600"},[s(e(A),{class:"h-3 w-3"})])])):_("",!0)])):_("",!0),r("div",nt,[r("table",it,[t[66]||(t[66]=r("thead",{class:"bg-gray-50 dark:bg-sidebar-accent"},[r("tr",null,[r("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Student"),r("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Grade"),r("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Term"),r("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Amount Paid"),r("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Balance"),r("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Payment Date"),r("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Status"),r("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Actions")])],-1)),r("tbody",ut,[(i(!0),f(S,null,P(e(F),(a,K)=>(i(),f("tr",{key:a.id,class:W(["hover:bg-gray-50 dark:hover:bg-sidebar-accent",{"bg-muted/50":K%2===0}])},[r("td",mt,n(a.student?.first_name)+" "+n(a.student?.last_name),1),r("td",ft,n(a.fee?.grade?.name||"N/A"),1),r("td",pt,n(a.fee?.term||"N/A"),1),r("td",_t,n(C(a.amount_paid)),1),r("td",gt,[a.balance>0?(i(),f("span",xt,n(C(a.balance)),1)):(i(),f("span",yt," Paid "))]),r("td",vt,n(pe(a.payment_date)),1),r("td",bt,[r("span",{class:W([_e(a.status),"rounded-full px-2 py-1 text-xs font-medium uppercase"])},n(a.status),3)]),r("td",kt,[r("div",ct,[s(e(w),{variant:"ghost",size:"sm",onClick:O=>ue(a.id)},{default:d(()=>[...t[64]||(t[64]=[o(" Edit ",-1)])]),_:1},8,["onClick"]),s(e(w),{variant:"destructive",size:"sm",onClick:O=>fe(a.id)},{default:d(()=>[...t[65]||(t[65]=[o(" Delete ",-1)])]),_:1},8,["onClick"])])])],2))),128))])]),e(F).length===0?(i(),f("div",wt,[t[68]||(t[68]=r("p",{class:"text-muted-foreground"},"No payments found matching your filters.",-1)),N.value?(i(),V(e(w),{key:0,variant:"outline",class:"mt-4",onClick:M},{default:d(()=>[...t[67]||(t[67]=[o(" Clear Filters ",-1)])]),_:1})):_("",!0)])):_("",!0)])])])]),s(e(Y),{open:L.value,"onUpdate:open":t[23]||(t[23]=a=>L.value=a)},{default:d(()=>[s(e(Z),{class:"sm:max-w-2xl",onInteractOutside:t[21]||(t[21]=a=>a.preventDefault()),onEscapeKeyDown:t[22]||(t[22]=a=>a.preventDefault())},{default:d(()=>[s(e(ee),null,{default:d(()=>[s(e(te),null,{default:d(()=>[...t[69]||(t[69]=[o("Record New Payment",-1)])]),_:1}),s(e(se),null,{default:d(()=>[...t[70]||(t[70]=[o(" Enter the payment details below to record a new fee payment. ",-1)])]),_:1})]),_:1}),r("div",Vt,[r("div",St,[s(e(x),{for:"student_id"},{default:d(()=>[...t[71]||(t[71]=[o("Student",-1)])]),_:1}),s(e(v),{modelValue:e(p).student_id,"onUpdate:modelValue":t[16]||(t[16]=a=>e(p).student_id=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"Select a student"})]),_:1}),s(e(c),null,{default:d(()=>[(i(!0),f(S,null,P(e(U),a=>(i(),V(e(g),{key:a.id,value:a.id.toString()},{default:d(()=>[o(n(a.first_name)+" "+n(a.last_name)+" - "+n(a.adm_no)+" ("+n(a.grade?.name)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(p).errors.student_id?(i(),f("span",Ct,n(e(p).errors.student_id),1)):_("",!0),e(p).student_id&&I(e(p).student_id)>0?(i(),f("div",Pt,[r("p",Ft," ðŸ’° Available Credit: "+n(C(I(e(p).student_id))),1),t[72]||(t[72]=r("p",{class:"text-xs text-green-600 dark:text-green-400"}," This credit can be applied to future fees ",-1))])):_("",!0)]),r("div",$t,[s(e(x),{for:"fee_id"},{default:d(()=>[...t[73]||(t[73]=[o("Fee",-1)])]),_:1}),s(e(v),{modelValue:e(p).fee_id,"onUpdate:modelValue":t[17]||(t[17]=a=>e(p).fee_id=a),disabled:!e(p).student_id},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"Select a fee"})]),_:1}),s(e(c),null,{default:d(()=>[(i(!0),f(S,null,P(ve.value,a=>(i(),V(e(g),{key:a.id,value:a.id.toString()},{default:d(()=>[o(n(a.term)+" ("+n(C(a.amount))+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e(p).student_id?_("",!0):(i(),f("span",At,"Select a student first")),e(p).errors.fee_id?(i(),f("span",Ut,n(e(p).errors.fee_id),1)):_("",!0)]),r("div",Dt,[r("div",Et,[s(e(x),{for:"amount_paid"},{default:d(()=>[...t[74]||(t[74]=[o("Amount Paid",-1)])]),_:1}),s(e(E),{id:"amount_paid",modelValue:e(p).amount_paid,"onUpdate:modelValue":t[18]||(t[18]=a=>e(p).amount_paid=a),type:"number",step:"0.01",placeholder:"15000.00"},null,8,["modelValue"]),e(p).errors.amount_paid?(i(),f("span",Tt,n(e(p).errors.amount_paid),1)):_("",!0)]),r("div",Lt,[s(e(x),{for:"payment_date"},{default:d(()=>[...t[75]||(t[75]=[o("Payment Date",-1)])]),_:1}),s(e(E),{id:"payment_date",modelValue:e(p).payment_date,"onUpdate:modelValue":t[19]||(t[19]=a=>e(p).payment_date=a),type:"date"},null,8,["modelValue"]),e(p).errors.payment_date?(i(),f("span",Bt,n(e(p).errors.payment_date),1)):_("",!0)])]),r("div",Nt,[s(e(x),{for:"status"},{default:d(()=>[...t[76]||(t[76]=[o("Status",-1)])]),_:1}),s(e(v),{modelValue:e(p).status,"onUpdate:modelValue":t[20]||(t[20]=a=>e(p).status=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"Select status"})]),_:1}),s(e(c),null,{default:d(()=>[s(e(g),{value:"pending"},{default:d(()=>[...t[77]||(t[77]=[o("Pending",-1)])]),_:1}),s(e(g),{value:"partial"},{default:d(()=>[...t[78]||(t[78]=[o("Partial",-1)])]),_:1}),s(e(g),{value:"paid"},{default:d(()=>[...t[79]||(t[79]=[o("Paid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(p).errors.status?(i(),f("span",It,n(e(p).errors.status),1)):_("",!0)])]),s(e(ae),{class:"pt-4"},{default:d(()=>[s(e(de),{"as-child":""},{default:d(()=>[s(e(w),{variant:"outline",onClick:G},{default:d(()=>[...t[80]||(t[80]=[o(" Cancel ",-1)])]),_:1})]),_:1}),s(e(w),{onClick:ie,disabled:e(p).processing},{default:d(()=>[o(n(e(p).processing?"Recording...":"Record Payment"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),s(e(Y),{open:B.value,"onUpdate:open":t[31]||(t[31]=a=>B.value=a)},{default:d(()=>[s(e(Z),{class:"sm:max-w-2xl",onInteractOutside:t[29]||(t[29]=a=>a.preventDefault()),onEscapeKeyDown:t[30]||(t[30]=a=>a.preventDefault())},{default:d(()=>[s(e(ee),null,{default:d(()=>[s(e(te),null,{default:d(()=>[...t[81]||(t[81]=[o("Edit Payment",-1)])]),_:1}),s(e(se),null,{default:d(()=>[...t[82]||(t[82]=[o(" Update the payment details below. ",-1)])]),_:1})]),_:1}),r("div",jt,[r("div",ht,[s(e(x),{for:"edit_student_id"},{default:d(()=>[...t[83]||(t[83]=[o("Student",-1)])]),_:1}),s(e(v),{modelValue:e(m).student_id,"onUpdate:modelValue":t[24]||(t[24]=a=>e(m).student_id=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"Select a student"})]),_:1}),s(e(c),null,{default:d(()=>[(i(!0),f(S,null,P(e(U),a=>(i(),V(e(g),{key:a.id,value:a.id.toString()},{default:d(()=>[o(n(a.first_name)+" "+n(a.last_name)+" - "+n(a.adm_no)+" ("+n(a.grade?.name)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(m).errors.student_id?(i(),f("span",Gt,n(e(m).errors.student_id),1)):_("",!0),e(m).student_id&&I(e(m).student_id)>0?(i(),f("div",Kt,[r("p",Ot," ðŸ’° Available Credit: "+n(C(I(e(m).student_id))),1)])):_("",!0)]),r("div",zt,[s(e(x),{for:"edit_fee_id"},{default:d(()=>[...t[84]||(t[84]=[o("Fee",-1)])]),_:1}),s(e(v),{modelValue:e(m).fee_id,"onUpdate:modelValue":t[25]||(t[25]=a=>e(m).fee_id=a),disabled:!e(m).student_id},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"Select a fee"})]),_:1}),s(e(c),null,{default:d(()=>[(i(!0),f(S,null,P(be.value,a=>(i(),V(e(g),{key:a.id,value:a.id.toString()},{default:d(()=>[o(n(a.term)+" ("+n(C(a.amount))+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e(m).student_id?_("",!0):(i(),f("span",Rt,"Select a student first")),e(m).errors.fee_id?(i(),f("span",Ht,n(e(m).errors.fee_id),1)):_("",!0)]),r("div",Xt,[r("div",qt,[s(e(x),{for:"edit_amount_paid"},{default:d(()=>[...t[85]||(t[85]=[o("Amount Paid",-1)])]),_:1}),s(e(E),{id:"edit_amount_paid",modelValue:e(m).amount_paid,"onUpdate:modelValue":t[26]||(t[26]=a=>e(m).amount_paid=a),type:"number",step:"0.01",placeholder:"15000.00"},null,8,["modelValue"]),e(m).errors.amount_paid?(i(),f("span",Jt,n(e(m).errors.amount_paid),1)):_("",!0)]),r("div",Mt,[s(e(x),{for:"edit_payment_date"},{default:d(()=>[...t[86]||(t[86]=[o("Payment Date",-1)])]),_:1}),s(e(E),{id:"edit_payment_date",modelValue:e(m).payment_date,"onUpdate:modelValue":t[27]||(t[27]=a=>e(m).payment_date=a),type:"date"},null,8,["modelValue"]),e(m).errors.payment_date?(i(),f("span",Qt,n(e(m).errors.payment_date),1)):_("",!0)])]),r("div",Wt,[s(e(x),{for:"edit_status"},{default:d(()=>[...t[87]||(t[87]=[o("Status",-1)])]),_:1}),s(e(v),{modelValue:e(m).status,"onUpdate:modelValue":t[28]||(t[28]=a=>e(m).status=a)},{default:d(()=>[s(e(b),null,{default:d(()=>[s(e(k),{placeholder:"Select status"})]),_:1}),s(e(c),null,{default:d(()=>[s(e(g),{value:"pending"},{default:d(()=>[...t[88]||(t[88]=[o("Pending",-1)])]),_:1}),s(e(g),{value:"partial"},{default:d(()=>[...t[89]||(t[89]=[o("Partial",-1)])]),_:1}),s(e(g),{value:"paid"},{default:d(()=>[...t[90]||(t[90]=[o("Paid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(m).errors.status?(i(),f("span",Yt,n(e(m).errors.status),1)):_("",!0)])]),s(e(ae),{class:"pt-4"},{default:d(()=>[s(e(de),{"as-child":""},{default:d(()=>[s(e(w),{variant:"outline",onClick:J},{default:d(()=>[...t[91]||(t[91]=[o(" Cancel ",-1)])]),_:1})]),_:1}),s(e(w),{onClick:me,disabled:e(m).processing},{default:d(()=>[o(n(e(m).processing?"Updating...":"Update Payment"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{gs as default};
