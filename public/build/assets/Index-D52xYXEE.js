import{X as _,_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Q70YfWpL.js";import{d as I}from"./index-Bhpqllgs.js";import{d as P,f as X,g as q,i as H,c as u,a as r,u as e,h as J,w as d,b as s,t as o,j as m,k as n,o as i,l as k,F as h,r as A,e as j,m as B}from"./app-lltRuelS.js";import{_ as b}from"./index-CHQOWgVS.js";import{_ as S,a as F,b as V,c as $,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-By4hewRT.js";import{_ as N}from"./Label.vue_vue_type_script_setup_true_lang-Byqnjj6a.js";import{F as M}from"./filter-CvNdDq5C.js";import"./index-DUy2Iiu9.js";import"./VisuallyHidden-BW8t_YaU.js";import"./useForwardExpose-CW1qrvco.js";import"./useForwardPropsEmits-BZIRSsnZ.js";import"./index-CMWG4mbA.js";import"./createLucideIcon-CJCMud_r.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-gBY4Er-0.js";import"./check-BM2Vcipb.js";import"./useFormControl-W7Oqm-74.js";const O={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},Q={class:"grid auto-rows-min gap-4 md:grid-cols-3"},R={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},W={class:"text-2xl font-bold"},Y={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},Z={class:"text-2xl font-bold text-green-600 dark:text-green-400"},tt={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},et={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},st={class:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 bg-white md:min-h-min dark:border-sidebar-border dark:bg-sidebar"},at={class:"p-6"},lt={class:"mb-4 flex items-center justify-between"},rt={key:0,class:"ml-1 rounded-full bg-primary px-2 py-0.5 text-xs text-primary-foreground"},dt={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-sidebar-accent"},ot={class:"mb-4 flex items-center justify-between"},nt={class:"grid gap-4 md:grid-cols-3"},it={class:"grid gap-2"},ut={class:"grid gap-2"},pt={class:"grid gap-2"},mt={class:"mt-4 flex justify-end gap-2"},ft={key:1,class:"mb-4 flex flex-wrap gap-2"},xt={key:0,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},gt={key:1,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},bt={key:2,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},ct={class:"overflow-x-auto"},vt={class:"min-w-full divide-y divide-gray-200"},yt={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-sidebar"},_t={class:"whitespace-nowrap px-6 py-4 text-sm font-medium"},kt={class:"whitespace-nowrap px-6 py-4 text-sm"},ht={class:"whitespace-nowrap px-6 py-4 text-sm font-semibold text-green-600 dark:text-green-400"},wt={class:"whitespace-nowrap px-6 py-4 text-sm"},Ct={class:"whitespace-nowrap px-6 py-4 text-sm"},At={class:"whitespace-nowrap px-6 py-4 text-sm"},St={key:0},Ft={key:1,class:"text-muted-foreground"},Vt={class:"whitespace-nowrap px-6 py-4 text-sm"},$t={class:"px-6 py-4 text-sm"},Nt={class:"line-clamp-2"},Dt={key:0,class:"py-12 text-center"},Ot=P({__name:"Index",props:{credits:{},students:{},fees:{},grades:{},totalAvailable:{},totalApplied:{},filters:{}},setup(w){const f=w,c=f.credits||[],D=f.students||[];f.fees;const G=f.grades||[],g=X(!1),a=q({student:f.filters?.student||"all",status:f.filters?.status||"all",grade:f.filters?.grade||"all"}),E=[{title:"Dashboard",href:I().url},{title:"Fee Credits",href:"#"}],C=p=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(p),K=p=>new Date(p).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}),T=p=>{const t={available:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",applied:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"};return t[p]||t.available},v=()=>{const p={};a.student&&a.student!=="all"&&(p.student=a.student),a.status&&a.status!=="all"&&(p.status=a.status),a.grade&&a.grade!=="all"&&(p.grade=a.grade),B.get("/fee-credits",p,{preserveState:!1,preserveScroll:!1,only:["credits","filters"]})},L=()=>{a.student="all",a.status="all",a.grade="all",B.get("/fee-credits",{},{preserveState:!1,preserveScroll:!1})},y=H(()=>!!(a.student&&a.student!=="all"||a.status&&a.status!=="all"||a.grade&&a.grade!=="all"));return c.reduce((p,t)=>p+parseFloat(t.amount||0),0),(p,t)=>(i(),u(h,null,[r(e(J),{title:"Fee Credits"}),r(z,{breadcrumbs:E},{default:d(()=>[s("div",O,[s("div",Q,[s("div",R,[t[8]||(t[8]=s("div",{class:"text-sm font-medium text-muted-foreground"},"Total Credits",-1)),s("div",W,o(e(c).length),1)]),s("div",Y,[t[9]||(t[9]=s("div",{class:"text-sm font-medium text-muted-foreground"},"Available Credits",-1)),s("div",Z,o(C(w.totalAvailable||0)),1)]),s("div",tt,[t[10]||(t[10]=s("div",{class:"text-sm font-medium text-muted-foreground"},"Applied Credits",-1)),s("div",et,o(C(w.totalApplied||0)),1)])]),s("div",st,[s("div",at,[s("div",lt,[t[12]||(t[12]=s("h2",{class:"text-xl font-semibold"},"Fee Credits",-1)),r(e(b),{variant:"outline",onClick:t[0]||(t[0]=l=>g.value=!g.value),class:"gap-2"},{default:d(()=>[r(e(M),{class:"h-4 w-4"}),t[11]||(t[11]=n(" Filters ",-1)),y.value?(i(),u("span",rt," Active ")):m("",!0)]),_:1})]),g.value?(i(),u("div",dt,[s("div",ot,[t[14]||(t[14]=s("h3",{class:"font-semibold"},"Filter Credits",-1)),y.value?(i(),k(e(b),{key:0,variant:"ghost",size:"sm",onClick:L,class:"gap-2 text-red-600 hover:text-red-700"},{default:d(()=>[r(e(_),{class:"h-4 w-4"}),t[13]||(t[13]=n(" Clear All ",-1))]),_:1})):m("",!0)]),s("div",nt,[s("div",it,[r(e(N),null,{default:d(()=>[...t[15]||(t[15]=[n("Student",-1)])]),_:1}),r(e(S),{modelValue:e(a).student,"onUpdate:modelValue":t[1]||(t[1]=l=>e(a).student=l)},{default:d(()=>[r(e(F),null,{default:d(()=>[r(e(V),{placeholder:"All Students"})]),_:1}),r(e($),null,{default:d(()=>[r(e(x),{value:"all"},{default:d(()=>[...t[16]||(t[16]=[n("All Students",-1)])]),_:1}),(i(!0),u(h,null,A(e(D),l=>(i(),k(e(x),{key:l.id,value:l.id.toString()},{default:d(()=>[n(o(l.first_name)+" "+o(l.last_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",ut,[r(e(N),null,{default:d(()=>[...t[17]||(t[17]=[n("Status",-1)])]),_:1}),r(e(S),{modelValue:e(a).status,"onUpdate:modelValue":t[2]||(t[2]=l=>e(a).status=l)},{default:d(()=>[r(e(F),null,{default:d(()=>[r(e(V),{placeholder:"All Statuses"})]),_:1}),r(e($),null,{default:d(()=>[r(e(x),{value:"all"},{default:d(()=>[...t[18]||(t[18]=[n("All Statuses",-1)])]),_:1}),r(e(x),{value:"available"},{default:d(()=>[...t[19]||(t[19]=[n("Available",-1)])]),_:1}),r(e(x),{value:"applied"},{default:d(()=>[...t[20]||(t[20]=[n("Applied",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",pt,[r(e(N),null,{default:d(()=>[...t[21]||(t[21]=[n("Grade",-1)])]),_:1}),r(e(S),{modelValue:e(a).grade,"onUpdate:modelValue":t[3]||(t[3]=l=>e(a).grade=l)},{default:d(()=>[r(e(F),null,{default:d(()=>[r(e(V),{placeholder:"All Grades"})]),_:1}),r(e($),null,{default:d(()=>[r(e(x),{value:"all"},{default:d(()=>[...t[22]||(t[22]=[n("All Grades",-1)])]),_:1}),(i(!0),u(h,null,A(e(G),l=>(i(),k(e(x),{key:l.id,value:l.id.toString()},{default:d(()=>[n(o(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),s("div",mt,[r(e(b),{variant:"outline",onClick:t[4]||(t[4]=l=>g.value=!1)},{default:d(()=>[...t[23]||(t[23]=[n(" Close ",-1)])]),_:1}),r(e(b),{onClick:v,disabled:e(a).processing},{default:d(()=>[...t[24]||(t[24]=[n(" Apply Filters ",-1)])]),_:1},8,["disabled"])])])):m("",!0),y.value&&!g.value?(i(),u("div",ft,[t[25]||(t[25]=s("span",{class:"text-sm text-muted-foreground"},"Active filters:",-1)),e(a).student&&e(a).student!=="all"?(i(),u("span",xt,[n(" Student: "+o(e(D).find(l=>l.id.toString()===e(a).student)?.first_name)+" ",1),s("button",{onClick:t[5]||(t[5]=l=>{e(a).student="all",v()}),class:"hover:text-red-600"},[r(e(_),{class:"h-3 w-3"})])])):m("",!0),e(a).status&&e(a).status!=="all"?(i(),u("span",gt,[n(" Status: "+o(e(a).status)+" ",1),s("button",{onClick:t[6]||(t[6]=l=>{e(a).status="all",v()}),class:"hover:text-red-600"},[r(e(_),{class:"h-3 w-3"})])])):m("",!0),e(a).grade&&e(a).grade!=="all"?(i(),u("span",bt,[n(" Grade: "+o(e(G).find(l=>l.id.toString()===e(a).grade)?.name)+" ",1),s("button",{onClick:t[7]||(t[7]=l=>{e(a).grade="all",v()}),class:"hover:text-red-600"},[r(e(_),{class:"h-3 w-3"})])])):m("",!0)])):m("",!0),s("div",ct,[s("table",vt,[t[26]||(t[26]=s("thead",{class:"bg-gray-50 dark:bg-sidebar-accent"},[s("tr",null,[s("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Student"),s("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Grade"),s("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Amount"),s("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Status"),s("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"From Payment"),s("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Applied To"),s("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Date"),s("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Notes")])],-1)),s("tbody",yt,[(i(!0),u(h,null,A(e(c),(l,U)=>(i(),u("tr",{key:l.id,class:j(["hover:bg-gray-50 dark:hover:bg-sidebar-accent",{"bg-muted/50":U%2===0}])},[s("td",_t,o(l.student?.first_name)+" "+o(l.student?.last_name),1),s("td",kt,o(l.student?.grade?.name||"N/A"),1),s("td",ht,o(C(l.amount)),1),s("td",wt,[s("span",{class:j([T(l.status),"rounded-full px-2 py-1 text-xs font-medium uppercase"])},o(l.status),3)]),s("td",Ct," Payment #"+o(l.from_payment_id),1),s("td",At,[l.applied_to_fee?(i(),u("span",St,o(l.applied_to_fee?.grade?.name)+" - "+o(l.applied_to_fee?.term),1)):(i(),u("span",Ft,"Not applied"))]),s("td",Vt,o(K(l.created_at)),1),s("td",$t,[s("span",Nt,o(l.notes||"-"),1)])],2))),128))])]),e(c).length===0?(i(),u("div",Dt,[t[28]||(t[28]=s("p",{class:"text-muted-foreground"},"No credits found matching your filters.",-1)),y.value?(i(),k(e(b),{key:0,variant:"outline",class:"mt-4",onClick:L},{default:d(()=>[...t[27]||(t[27]=[n(" Clear Filters ",-1)])]),_:1})):m("",!0)])):m("",!0)])])])])]),_:1})],64))}});export{Ot as default};
