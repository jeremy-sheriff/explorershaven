import{f as Ce,X as T,_ as Fe}from"./AppLayout.vue_vue_type_script_setup_true_lang-Cndq5wqU.js";import{d as Pe}from"./index-C4J_hXM0.js";import{d as Ae,f as H,g as J,i as B,j as te,c as p,a as d,u as e,h as he,w as s,b as l,t as o,k as _,l as n,o as u,m as F,F as P,r as D,e as U,p as M}from"./app-BaMTLf0c.js";import{_ as c}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-KUCnI7xo.js";import{_ as ae,a as de,b as se,c as le,d as re}from"./DialogTitle.vue_vue_type_script_setup_true_lang-l6HLHsYh.js";import{_ as ne,a as oe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DLnqlGDm.js";import{_ as w,a as S,b as V,c as C,d as x}from"./SelectValue.vue_vue_type_script_setup_true_lang-A0rMVCfD.js";import{_ as N}from"./Input.vue_vue_type_script_setup_true_lang-BXKHqLVL.js";import{_ as b}from"./Label.vue_vue_type_script_setup_true_lang-BuJ2jY30.js";import{c as $e}from"./createLucideIcon-1IMwB0Da.js";import"./index-BSXV7ibA.js";import"./VisuallyHidden-PtG5Vzf5.js";import"./useForwardExpose-BNpi4f1R.js";import"./useForwardPropsEmits-Df4LXQTd.js";import"./check-CIeoLtpN.js";import"./useFormControl-BNQTw1xV.js";const De=$e("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Ue={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},Ie={class:"grid auto-rows-min gap-4 md:grid-cols-4"},Ee={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},Te={class:"text-2xl font-bold"},Be={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},Le={class:"text-2xl font-bold"},Ne={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},je={class:"text-2xl font-bold"},Ge={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},Ke={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Oe={class:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 bg-white md:min-h-min dark:border-sidebar-border dark:bg-sidebar"},ze={class:"p-6"},Re={class:"mb-4 flex items-center justify-between"},He={class:"flex gap-2"},Xe={key:0,class:"ml-1 rounded-full bg-primary px-2 py-0.5 text-xs text-primary-foreground"},qe={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-sidebar-accent"},Je={class:"mb-4 flex items-center justify-between"},Me={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},Qe={class:"grid gap-2"},We={class:"grid gap-2"},Ye={class:"grid gap-2"},Ze={class:"grid gap-2"},et={class:"grid gap-2"},tt={class:"grid gap-2"},at={class:"grid gap-2"},dt={class:"grid gap-2"},st={class:"mt-4 flex justify-end gap-2"},lt={key:1,class:"mb-4 flex flex-wrap gap-2"},rt={key:0,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},nt={key:1,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},ot={key:2,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},it={key:3,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},ut={key:4,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},mt={key:5,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},ft={class:"overflow-x-auto"},pt={class:"min-w-full divide-y divide-gray-200"},_t={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-sidebar"},gt={class:"whitespace-nowrap px-6 py-4 text-sm font-medium"},xt={class:"whitespace-nowrap px-6 py-4 text-sm"},bt={class:"whitespace-nowrap px-6 py-4 text-sm"},yt={class:"whitespace-nowrap px-6 py-4 text-sm font-semibold"},vt={class:"whitespace-nowrap px-6 py-4 text-sm"},ct={key:0,class:"font-semibold text-orange-600 dark:text-orange-400"},kt={key:1,class:"font-semibold text-green-600 dark:text-green-400"},wt={class:"whitespace-nowrap px-6 py-4 text-sm"},St={class:"whitespace-nowrap px-6 py-4 text-sm"},Vt={class:"whitespace-nowrap px-6 py-4 text-right"},Ct={class:"flex items-center justify-end gap-2"},Ft={key:0,class:"py-12 text-center"},Pt={class:"grid gap-4 py-4"},At={class:"grid gap-2"},ht={key:0,class:"text-sm text-red-600"},$t={key:1,class:"rounded-lg bg-green-50 p-3 dark:bg-green-900/20"},Dt={class:"text-sm font-medium text-green-800 dark:text-green-200"},Ut={class:"grid gap-2"},It={key:0,class:"text-xs text-muted-foreground"},Et={key:1,class:"text-sm text-red-600"},Tt={class:"grid gap-4 sm:grid-cols-2"},Bt={class:"grid gap-2"},Lt={key:0,class:"text-sm text-red-600"},Nt={class:"grid gap-2"},jt={key:0,class:"text-sm text-red-600"},Gt={class:"grid gap-4 py-4"},Kt={class:"grid gap-2"},Ot={key:0,class:"text-sm text-red-600"},zt={key:1,class:"rounded-lg bg-green-50 p-3 dark:bg-green-900/20"},Rt={class:"text-sm font-medium text-green-800 dark:text-green-200"},Ht={class:"grid gap-2"},Xt={key:0,class:"text-xs text-muted-foreground"},qt={key:1,class:"text-sm text-red-600"},Jt={class:"grid gap-4 sm:grid-cols-2"},Mt={class:"grid gap-2"},Qt={key:0,class:"text-sm text-red-600"},Wt={class:"grid gap-2"},Yt={key:0,class:"text-sm text-red-600"},ga=Ae({__name:"Index",props:{payments:{},students:{},fees:{},credits:{},grades:{},terms:{},filters:{}},setup(ie){const y=ie,v=y.payments||[],L=y.students||[],A=y.fees||[],Q=y.credits||{},W=y.grades||[],ue=y.terms||[],K=H(!1),O=H(!1),j=H(null),G=H(!1),r=J({grade:y.filters?.grade||"all",term:y.filters?.term||"all",status:y.filters?.status||"all",student:y.filters?.student||"all",date_from:y.filters?.date_from||"",date_to:y.filters?.date_to||"",has_balance:y.filters?.has_balance||"all",sort_balance:y.filters?.sort_balance||"all"}),me=[{title:"Dashboard",href:Pe().url},{title:"Fee Payments",href:Ce.index.url}],f=J({student_id:"",fee_id:"",amount_paid:"",payment_date:new Date().toISOString().split("T")[0]}),m=J({student_id:"",fee_id:"",amount_paid:"",payment_date:""}),X=()=>{f.reset(),f.payment_date=new Date().toISOString().split("T")[0]},Y=()=>{m.reset()},fe=()=>{X(),K.value=!0},pe=()=>{f.post("/fee-payments",{onSuccess:()=>{K.value=!1,X()}})},_e=i=>{const t=v.find(a=>a.id===i);t&&(j.value=t.id,m.student_id=t.student_id.toString(),m.fee_id=t.fee_id.toString(),m.amount_paid=t.amount_paid.toString(),m.payment_date=t.payment_date,O.value=!0)},ge=()=>{j.value&&m.put(`/fee-payments/${j.value}`,{onSuccess:()=>{O.value=!1,Y()}})},xe=i=>{confirm("Are you sure you want to delete this payment?")&&M.delete(`/fee-payments/${i}`)},I=()=>{const i={};r.grade&&r.grade!=="all"&&(i.grade=r.grade),r.term&&r.term!=="all"&&(i.term=r.term),r.status&&r.status!=="all"&&(i.status=r.status),r.student&&r.student!=="all"&&(i.student=r.student),r.date_from&&(i.date_from=r.date_from),r.date_to&&(i.date_to=r.date_to),r.has_balance&&r.has_balance!=="all"&&(i.has_balance=r.has_balance),r.sort_balance&&r.sort_balance!=="all"&&(i.sort_balance=r.sort_balance),M.get("/fee-payments",i,{preserveState:!1,preserveScroll:!1,only:["payments","filters"]})},Z=()=>{r.grade="all",r.term="all",r.status="all",r.student="all",r.date_from="",r.date_to="",r.has_balance="all",r.sort_balance="all",M.get("/fee-payments",{},{preserveState:!1,preserveScroll:!1})},z=B(()=>!!(r.grade&&r.grade!=="all"||r.term&&r.term!=="all"||r.status&&r.status!=="all"||r.student&&r.student!=="all"||r.date_from||r.date_to||r.has_balance&&r.has_balance!=="all"||r.sort_balance&&r.sort_balance!=="all")),k=i=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(i),be=i=>i?new Date(i).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}):"Not paid",ye=i=>{const t={paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",partial:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"};return t[i]||t.partial},ve=v.reduce((i,t)=>i+parseFloat(t.amount_paid||0),0),ce=v.filter(i=>i.status==="paid").length,ke=v.filter(i=>i.status==="partial").length,we=B(()=>{if(!f.student_id)return A;const i=L.find(t=>t.id.toString()===f.student_id);return!i||!i.grade_id?A:A.filter(t=>t.grade_id===i.grade_id)}),Se=B(()=>{if(!m.student_id)return A;const i=L.find(t=>t.id.toString()===m.student_id);return!i||!i.grade_id?A:A.filter(t=>t.grade_id===i.grade_id)}),q=B(()=>{if(!f.student_id||!f.fee_id)return null;const i=f.student_id,t=f.fee_id,a=v.filter(g=>g.student_id.toString()===i&&g.fee_id.toString()===t);if(a.length===0){const g=A.find(E=>E.id.toString()===t);return g?g.amount:null}return a[0].balance}),ee=B(()=>{if(!m.student_id||!m.fee_id)return null;const i=m.student_id,t=m.fee_id,a=v.filter(g=>g.student_id.toString()===i&&g.fee_id.toString()===t&&g.id!==j.value);if(a.length===0){const g=A.find(E=>E.id.toString()===t);return g?g.amount:null}return a[0].balance}),h=B(()=>{if(!f.student_id||!f.fee_id)return!1;const i=f.student_id,t=f.fee_id,a=v.filter(g=>g.student_id.toString()===i&&g.fee_id.toString()===t);return a.length===0?!1:a[0].balance===0}),$=B(()=>{if(!m.student_id||!m.fee_id)return!1;const i=m.student_id,t=m.fee_id,a=v.filter(g=>g.student_id.toString()===i&&g.fee_id.toString()===t&&g.id!==j.value);return a.length===0?!1:a[0].balance===0});te(()=>f.student_id,()=>{f.fee_id=""}),te(()=>m.student_id,()=>{m.fee_id=""});const R=i=>(Q[i]||[]).reduce((g,E)=>g+parseFloat(E.amount||0),0),Ve=Object.values(Q).flat().reduce((i,t)=>i+parseFloat(t.amount||0),0);return(i,t)=>(u(),p(P,null,[d(e(he),{title:"Fee Payments"}),d(Fe,{breadcrumbs:me},{default:s(()=>[l("div",Ue,[l("div",Ie,[l("div",Ee,[t[30]||(t[30]=l("div",{class:"text-sm font-medium text-muted-foreground"},"Total Payments",-1)),l("div",Te,o(e(v).length),1)]),l("div",Be,[t[31]||(t[31]=l("div",{class:"text-sm font-medium text-muted-foreground"},"Total Collected",-1)),l("div",Le,o(k(e(ve))),1)]),l("div",Ne,[t[32]||(t[32]=l("div",{class:"text-sm font-medium text-muted-foreground"},"Paid / Partial",-1)),l("div",je,o(e(ce))+" / "+o(e(ke)),1)]),l("div",Ge,[t[33]||(t[33]=l("div",{class:"text-sm font-medium text-muted-foreground"},"Available Credits",-1)),l("div",Ke,o(k(e(Ve))),1)])]),l("div",Oe,[l("div",ze,[l("div",Re,[t[35]||(t[35]=l("h2",{class:"text-xl font-semibold"},"Fee Payments",-1)),l("div",He,[d(e(c),{variant:"outline",onClick:t[0]||(t[0]=a=>G.value=!G.value),class:"gap-2"},{default:s(()=>[d(e(De),{class:"h-4 w-4"}),t[34]||(t[34]=n(" Filters ",-1)),z.value?(u(),p("span",Xe," Active ")):_("",!0)]),_:1}),l("button",{onClick:fe,class:"rounded-lg bg-black px-4 py-2 text-sm font-medium text-white hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200"}," + Record Payment ")])]),G.value?(u(),p("div",qe,[l("div",Je,[t[37]||(t[37]=l("h3",{class:"font-semibold"},"Filter Payments",-1)),z.value?(u(),F(e(c),{key:0,variant:"ghost",size:"sm",onClick:Z,class:"gap-2 text-red-600 hover:text-red-700"},{default:s(()=>[d(e(T),{class:"h-4 w-4"}),t[36]||(t[36]=n(" Clear All ",-1))]),_:1})):_("",!0)]),l("div",Me,[l("div",Qe,[d(e(b),null,{default:s(()=>[...t[38]||(t[38]=[n("Grade",-1)])]),_:1}),d(e(w),{modelValue:e(r).grade,"onUpdate:modelValue":t[1]||(t[1]=a=>e(r).grade=a)},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"All Grades"})]),_:1}),d(e(C),null,{default:s(()=>[d(e(x),{value:"all"},{default:s(()=>[...t[39]||(t[39]=[n("All Grades",-1)])]),_:1}),(u(!0),p(P,null,D(e(W),a=>(u(),F(e(x),{key:a.id,value:a.id.toString()},{default:s(()=>[n(o(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",We,[d(e(b),null,{default:s(()=>[...t[40]||(t[40]=[n("Term",-1)])]),_:1}),d(e(w),{modelValue:e(r).term,"onUpdate:modelValue":t[2]||(t[2]=a=>e(r).term=a)},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"All Terms"})]),_:1}),d(e(C),null,{default:s(()=>[d(e(x),{value:"all"},{default:s(()=>[...t[41]||(t[41]=[n("All Terms",-1)])]),_:1}),(u(!0),p(P,null,D(e(ue),a=>(u(),F(e(x),{key:a,value:a},{default:s(()=>[n(o(a),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",Ye,[d(e(b),null,{default:s(()=>[...t[42]||(t[42]=[n("Status",-1)])]),_:1}),d(e(w),{modelValue:e(r).status,"onUpdate:modelValue":t[3]||(t[3]=a=>e(r).status=a)},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"All Statuses"})]),_:1}),d(e(C),null,{default:s(()=>[d(e(x),{value:"all"},{default:s(()=>[...t[43]||(t[43]=[n("All Statuses",-1)])]),_:1}),d(e(x),{value:"paid"},{default:s(()=>[...t[44]||(t[44]=[n("Paid",-1)])]),_:1}),d(e(x),{value:"partial"},{default:s(()=>[...t[45]||(t[45]=[n("Partial",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",Ze,[d(e(b),null,{default:s(()=>[...t[46]||(t[46]=[n("Student",-1)])]),_:1}),d(e(w),{modelValue:e(r).student,"onUpdate:modelValue":t[4]||(t[4]=a=>e(r).student=a)},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"All Students"})]),_:1}),d(e(C),null,{default:s(()=>[d(e(x),{value:"all"},{default:s(()=>[...t[47]||(t[47]=[n("All Students",-1)])]),_:1}),(u(!0),p(P,null,D(e(L),a=>(u(),F(e(x),{key:a.id,value:a.id.toString()},{default:s(()=>[n(o(a.first_name)+" "+o(a.last_name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l("div",et,[d(e(b),{for:"date_from"},{default:s(()=>[...t[48]||(t[48]=[n("Date From",-1)])]),_:1}),d(e(N),{id:"date_from",modelValue:e(r).date_from,"onUpdate:modelValue":t[5]||(t[5]=a=>e(r).date_from=a),type:"date",class:"w-full"},null,8,["modelValue"])]),l("div",tt,[d(e(b),{for:"date_to"},{default:s(()=>[...t[49]||(t[49]=[n("Date To",-1)])]),_:1}),d(e(N),{id:"date_to",modelValue:e(r).date_to,"onUpdate:modelValue":t[6]||(t[6]=a=>e(r).date_to=a),type:"date",class:"w-full"},null,8,["modelValue"])]),l("div",at,[d(e(b),null,{default:s(()=>[...t[50]||(t[50]=[n("Balance Status",-1)])]),_:1}),d(e(w),{modelValue:e(r).has_balance,"onUpdate:modelValue":t[7]||(t[7]=a=>e(r).has_balance=a)},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"All"})]),_:1}),d(e(C),null,{default:s(()=>[d(e(x),{value:"all"},{default:s(()=>[...t[51]||(t[51]=[n("All",-1)])]),_:1}),d(e(x),{value:"yes"},{default:s(()=>[...t[52]||(t[52]=[n("Has Balance",-1)])]),_:1}),d(e(x),{value:"no"},{default:s(()=>[...t[53]||(t[53]=[n("Fully Paid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",dt,[d(e(b),null,{default:s(()=>[...t[54]||(t[54]=[n("Sort by Balance",-1)])]),_:1}),d(e(w),{modelValue:e(r).sort_balance,"onUpdate:modelValue":t[8]||(t[8]=a=>e(r).sort_balance=a)},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"Default"})]),_:1}),d(e(C),null,{default:s(()=>[d(e(x),{value:"all"},{default:s(()=>[...t[55]||(t[55]=[n("Default (Latest First)",-1)])]),_:1}),d(e(x),{value:"asc"},{default:s(()=>[...t[56]||(t[56]=[n("Balance: Low to High",-1)])]),_:1}),d(e(x),{value:"desc"},{default:s(()=>[...t[57]||(t[57]=[n("Balance: High to Low",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),l("div",st,[d(e(c),{variant:"outline",onClick:t[9]||(t[9]=a=>G.value=!1)},{default:s(()=>[...t[58]||(t[58]=[n(" Close ",-1)])]),_:1}),d(e(c),{onClick:I,disabled:e(r).processing},{default:s(()=>[...t[59]||(t[59]=[n(" Apply Filters ",-1)])]),_:1},8,["disabled"])])])):_("",!0),z.value&&!G.value?(u(),p("div",lt,[t[60]||(t[60]=l("span",{class:"text-sm text-muted-foreground"},"Active filters:",-1)),e(r).grade&&e(r).grade!=="all"?(u(),p("span",rt,[n(" Grade: "+o(e(W).find(a=>a.id.toString()===e(r).grade)?.name)+" ",1),l("button",{onClick:t[10]||(t[10]=a=>{e(r).grade="all",I()}),class:"hover:text-red-600"},[d(e(T),{class:"h-3 w-3"})])])):_("",!0),e(r).term&&e(r).term!=="all"?(u(),p("span",nt,[n(" Term: "+o(e(r).term)+" ",1),l("button",{onClick:t[11]||(t[11]=a=>{e(r).term="all",I()}),class:"hover:text-red-600"},[d(e(T),{class:"h-3 w-3"})])])):_("",!0),e(r).status&&e(r).status!=="all"?(u(),p("span",ot,[n(" Status: "+o(e(r).status)+" ",1),l("button",{onClick:t[12]||(t[12]=a=>{e(r).status="all",I()}),class:"hover:text-red-600"},[d(e(T),{class:"h-3 w-3"})])])):_("",!0),e(r).student&&e(r).student!=="all"?(u(),p("span",it,[n(" Student: "+o(e(L).find(a=>a.id.toString()===e(r).student)?.first_name)+" ",1),l("button",{onClick:t[13]||(t[13]=a=>{e(r).student="all",I()}),class:"hover:text-red-600"},[d(e(T),{class:"h-3 w-3"})])])):_("",!0),e(r).date_from?(u(),p("span",ut,[n(" From: "+o(e(r).date_from)+" ",1),l("button",{onClick:t[14]||(t[14]=a=>{e(r).date_from="",I()}),class:"hover:text-red-600"},[d(e(T),{class:"h-3 w-3"})])])):_("",!0),e(r).date_to?(u(),p("span",mt,[n(" To: "+o(e(r).date_to)+" ",1),l("button",{onClick:t[15]||(t[15]=a=>{e(r).date_to="",I()}),class:"hover:text-red-600"},[d(e(T),{class:"h-3 w-3"})])])):_("",!0)])):_("",!0),l("div",ft,[l("table",pt,[t[63]||(t[63]=l("thead",{class:"bg-gray-50 dark:bg-sidebar-accent"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Student"),l("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Grade"),l("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Term"),l("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Amount Paid"),l("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Balance"),l("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Payment Date"),l("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Status"),l("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Actions")])],-1)),l("tbody",_t,[(u(!0),p(P,null,D(e(v),(a,g)=>(u(),p("tr",{key:a.id,class:U(["hover:bg-gray-50 dark:hover:bg-sidebar-accent",{"bg-muted/50":g%2===0}])},[l("td",gt,o(a.student?.first_name)+" "+o(a.student?.last_name),1),l("td",xt,o(a.fee?.grade?.name||"N/A"),1),l("td",bt,o(a.fee?.term||"N/A"),1),l("td",yt,o(k(a.amount_paid)),1),l("td",vt,[a.balance>0?(u(),p("span",ct,o(k(a.balance)),1)):(u(),p("span",kt," Paid "))]),l("td",wt,o(be(a.payment_date)),1),l("td",St,[l("span",{class:U([ye(a.status),"rounded-full px-2 py-1 text-xs font-medium uppercase"])},o(a.status),3)]),l("td",Vt,[l("div",Ct,[d(e(c),{variant:"ghost",size:"sm",onClick:E=>_e(a.id)},{default:s(()=>[...t[61]||(t[61]=[n(" Edit ",-1)])]),_:1},8,["onClick"]),d(e(c),{variant:"destructive",size:"sm",onClick:E=>xe(a.id)},{default:s(()=>[...t[62]||(t[62]=[n(" Delete ",-1)])]),_:1},8,["onClick"])])])],2))),128))])]),e(v).length===0?(u(),p("div",Ft,[t[65]||(t[65]=l("p",{class:"text-muted-foreground"},"No payments found matching your filters.",-1)),z.value?(u(),F(e(c),{key:0,variant:"outline",class:"mt-4",onClick:Z},{default:s(()=>[...t[64]||(t[64]=[n(" Clear Filters ",-1)])]),_:1})):_("",!0)])):_("",!0)])])])]),d(e(ae),{open:K.value,"onUpdate:open":t[22]||(t[22]=a=>K.value=a)},{default:s(()=>[d(e(de),{class:"sm:max-w-2xl",onInteractOutside:t[20]||(t[20]=a=>a.preventDefault()),onEscapeKeyDown:t[21]||(t[21]=a=>a.preventDefault())},{default:s(()=>[d(e(se),null,{default:s(()=>[d(e(le),null,{default:s(()=>[...t[66]||(t[66]=[n("Record New Payment",-1)])]),_:1}),d(e(re),null,{default:s(()=>[...t[67]||(t[67]=[n(" Enter the payment details below. Status will be automatically calculated. ",-1)])]),_:1})]),_:1}),l("div",Pt,[l("div",At,[d(e(b),{for:"student_id"},{default:s(()=>[...t[68]||(t[68]=[n("Student",-1)])]),_:1}),d(e(w),{modelValue:e(f).student_id,"onUpdate:modelValue":t[16]||(t[16]=a=>e(f).student_id=a)},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"Select a student"})]),_:1}),d(e(C),null,{default:s(()=>[(u(!0),p(P,null,D(e(L),a=>(u(),F(e(x),{key:a.id,value:a.id.toString()},{default:s(()=>[n(o(a.first_name)+" "+o(a.last_name)+" - "+o(a.adm_no)+" ("+o(a.grade?.name)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(f).errors.student_id?(u(),p("span",ht,o(e(f).errors.student_id),1)):_("",!0),e(f).student_id&&R(e(f).student_id)>0?(u(),p("div",$t,[l("p",Dt," ðŸ’° Available Credit: "+o(k(R(e(f).student_id))),1),t[69]||(t[69]=l("p",{class:"text-xs text-green-600 dark:text-green-400"}," This credit can be applied to future fees ",-1))])):_("",!0)]),l("div",Ut,[d(e(b),{for:"fee_id"},{default:s(()=>[...t[70]||(t[70]=[n("Fee",-1)])]),_:1}),d(e(w),{modelValue:e(f).fee_id,"onUpdate:modelValue":t[17]||(t[17]=a=>e(f).fee_id=a),disabled:!e(f).student_id},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"Select a fee"})]),_:1}),d(e(C),null,{default:s(()=>[(u(!0),p(P,null,D(we.value,a=>(u(),F(e(x),{key:a.id,value:a.id.toString()},{default:s(()=>[n(o(a.term)+" ("+o(k(a.amount))+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e(f).student_id?_("",!0):(u(),p("span",It,"Select a student first")),e(f).errors.fee_id?(u(),p("span",Et,o(e(f).errors.fee_id),1)):_("",!0)]),q.value!==null&&e(f).fee_id?(u(),p("div",{key:0,class:U(["rounded-lg p-3",h.value?"bg-red-50 dark:bg-red-900/20":"bg-orange-50 dark:bg-orange-900/20"])},[l("p",{class:U(["text-sm font-medium",h.value?"text-red-800 dark:text-red-200":"text-orange-800 dark:text-orange-200"])},o(h.value?"ðŸš«":"ðŸ“Š")+" Current Balance: "+o(k(q.value)),3),l("p",{class:U(["text-xs",h.value?"text-red-600 dark:text-red-400":"text-orange-600 dark:text-orange-400"])},o(h.value?"âš ï¸ This fee has been fully paid. Additional payments are not allowed.":q.value>0?"Amount remaining to be paid for this fee":"This fee has been fully paid"),3)],2)):_("",!0),l("div",Tt,[l("div",Bt,[d(e(b),{for:"amount_paid"},{default:s(()=>[...t[71]||(t[71]=[n("Amount Paid",-1)])]),_:1}),d(e(N),{id:"amount_paid",modelValue:e(f).amount_paid,"onUpdate:modelValue":t[18]||(t[18]=a=>e(f).amount_paid=a),type:"number",step:"0.01",placeholder:"15000.00",disabled:h.value},null,8,["modelValue","disabled"]),e(f).errors.amount_paid?(u(),p("span",Lt,o(e(f).errors.amount_paid),1)):_("",!0)]),l("div",Nt,[d(e(b),{for:"payment_date"},{default:s(()=>[...t[72]||(t[72]=[n("Payment Date",-1)])]),_:1}),d(e(N),{id:"payment_date",modelValue:e(f).payment_date,"onUpdate:modelValue":t[19]||(t[19]=a=>e(f).payment_date=a),type:"date",disabled:h.value},null,8,["modelValue","disabled"]),e(f).errors.payment_date?(u(),p("span",jt,o(e(f).errors.payment_date),1)):_("",!0)])]),t[73]||(t[73]=l("div",{class:"rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},[l("p",{class:"text-xs text-blue-800 dark:text-blue-200"}," â„¹ï¸ Payment status will be automatically calculated based on the balance ")],-1))]),d(e(ne),{class:"pt-4"},{default:s(()=>[d(e(oe),{"as-child":""},{default:s(()=>[d(e(c),{variant:"outline",onClick:X},{default:s(()=>[...t[74]||(t[74]=[n(" Cancel ",-1)])]),_:1})]),_:1}),d(e(c),{onClick:pe,disabled:e(f).processing||h.value},{default:s(()=>[n(o(e(f).processing?"Recording...":"Record Payment"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),d(e(ae),{open:O.value,"onUpdate:open":t[29]||(t[29]=a=>O.value=a)},{default:s(()=>[d(e(de),{class:"sm:max-w-2xl",onInteractOutside:t[27]||(t[27]=a=>a.preventDefault()),onEscapeKeyDown:t[28]||(t[28]=a=>a.preventDefault())},{default:s(()=>[d(e(se),null,{default:s(()=>[d(e(le),null,{default:s(()=>[...t[75]||(t[75]=[n("Edit Payment",-1)])]),_:1}),d(e(re),null,{default:s(()=>[...t[76]||(t[76]=[n(" Update the payment details. Status will be automatically recalculated. ",-1)])]),_:1})]),_:1}),l("div",Gt,[l("div",Kt,[d(e(b),{for:"edit_student_id"},{default:s(()=>[...t[77]||(t[77]=[n("Student",-1)])]),_:1}),d(e(w),{modelValue:e(m).student_id,"onUpdate:modelValue":t[23]||(t[23]=a=>e(m).student_id=a)},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"Select a student"})]),_:1}),d(e(C),null,{default:s(()=>[(u(!0),p(P,null,D(e(L),a=>(u(),F(e(x),{key:a.id,value:a.id.toString()},{default:s(()=>[n(o(a.first_name)+" "+o(a.last_name)+" - "+o(a.adm_no)+" ("+o(a.grade?.name)+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(m).errors.student_id?(u(),p("span",Ot,o(e(m).errors.student_id),1)):_("",!0),e(m).student_id&&R(e(m).student_id)>0?(u(),p("div",zt,[l("p",Rt," ðŸ’° Available Credit: "+o(k(R(e(m).student_id))),1)])):_("",!0)]),l("div",Ht,[d(e(b),{for:"edit_fee_id"},{default:s(()=>[...t[78]||(t[78]=[n("Fee",-1)])]),_:1}),d(e(w),{modelValue:e(m).fee_id,"onUpdate:modelValue":t[24]||(t[24]=a=>e(m).fee_id=a),disabled:!e(m).student_id},{default:s(()=>[d(e(S),null,{default:s(()=>[d(e(V),{placeholder:"Select a fee"})]),_:1}),d(e(C),null,{default:s(()=>[(u(!0),p(P,null,D(Se.value,a=>(u(),F(e(x),{key:a.id,value:a.id.toString()},{default:s(()=>[n(o(a.term)+" ("+o(k(a.amount))+") ",1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e(m).student_id?_("",!0):(u(),p("span",Xt,"Select a student first")),e(m).errors.fee_id?(u(),p("span",qt,o(e(m).errors.fee_id),1)):_("",!0)]),ee.value!==null&&e(m).fee_id?(u(),p("div",{key:0,class:U(["rounded-lg p-3",$.value?"bg-red-50 dark:bg-red-900/20":"bg-orange-50 dark:bg-orange-900/20"])},[l("p",{class:U(["text-sm font-medium",$.value?"text-red-800 dark:text-red-200":"text-orange-800 dark:text-orange-200"])},o($.value?"ðŸš«":"ðŸ“Š")+" Current Balance: "+o(k(ee.value)),3),l("p",{class:U(["text-xs",$.value?"text-red-600 dark:text-red-400":"text-orange-600 dark:text-orange-400"])},o($.value?"âš ï¸ This fee has been fully paid. Cannot add more payments.":"Amount remaining after other payments"),3)],2)):_("",!0),l("div",Jt,[l("div",Mt,[d(e(b),{for:"edit_amount_paid"},{default:s(()=>[...t[79]||(t[79]=[n("Amount Paid",-1)])]),_:1}),d(e(N),{id:"edit_amount_paid",modelValue:e(m).amount_paid,"onUpdate:modelValue":t[25]||(t[25]=a=>e(m).amount_paid=a),type:"number",step:"0.01",placeholder:"15000.00",disabled:$.value},null,8,["modelValue","disabled"]),e(m).errors.amount_paid?(u(),p("span",Qt,o(e(m).errors.amount_paid),1)):_("",!0)]),l("div",Wt,[d(e(b),{for:"edit_payment_date"},{default:s(()=>[...t[80]||(t[80]=[n("Payment Date",-1)])]),_:1}),d(e(N),{id:"edit_payment_date",modelValue:e(m).payment_date,"onUpdate:modelValue":t[26]||(t[26]=a=>e(m).payment_date=a),type:"date",disabled:$.value},null,8,["modelValue","disabled"]),e(m).errors.payment_date?(u(),p("span",Yt,o(e(m).errors.payment_date),1)):_("",!0)])]),t[81]||(t[81]=l("div",{class:"rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},[l("p",{class:"text-xs text-blue-800 dark:text-blue-200"}," â„¹ï¸ Payment status will be automatically recalculated based on the balance ")],-1))]),d(e(ne),{class:"pt-4"},{default:s(()=>[d(e(oe),{"as-child":""},{default:s(()=>[d(e(c),{variant:"outline",onClick:Y},{default:s(()=>[...t[82]||(t[82]=[n(" Cancel ",-1)])]),_:1})]),_:1}),d(e(c),{onClick:ge,disabled:e(m).processing||$.value},{default:s(()=>[n(o(e(m).processing?"Updating...":"Update Payment"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{ga as default};
