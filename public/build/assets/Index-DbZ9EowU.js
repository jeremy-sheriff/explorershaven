import{X as k,_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-BXI_MD_1.js";import{d as H}from"./index-C4J_hXM0.js";import{d as J,f as M,g as O,i as P,c as u,a as l,u as r,h as Q,w as o,b as t,t as m,k as p,l as n,o as i,m as v,F as y,r as w,p as V}from"./app-B9o6v0Uo.js";import{_ as g}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-C6SSWYw9.js";import{_ as S,a as D,b as T,c as E,d as _}from"./SelectValue.vue_vue_type_script_setup_true_lang-DQNh5u6s.js";import{_ as N}from"./Label.vue_vue_type_script_setup_true_lang-C3pt1dcO.js";import{F as W}from"./filter-DKe7JuO4.js";import"./index-DnNif90y.js";import"./VisuallyHidden-DW872TyJ.js";import"./useForwardExpose-CDdd63H6.js";import"./useForwardPropsEmits-DKTDOzrZ.js";import"./createLucideIcon-D1qVs5Fa.js";import"./check-DnR613s1.js";import"./useFormControl-Bie98_Fz.js";const Y={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},Z={class:"grid auto-rows-min gap-4 md:grid-cols-3"},ee={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},te={class:"text-2xl font-bold"},re={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},se={class:"text-2xl font-bold"},ae={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},le={class:"text-2xl font-bold"},de={class:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 bg-white md:min-h-min dark:border-sidebar-border dark:bg-sidebar"},oe={class:"p-6"},ie={class:"mb-4 flex items-center justify-between"},ne={class:"flex gap-2"},ue={key:0,class:"ml-1 rounded-full bg-primary px-2 py-0.5 text-xs text-primary-foreground"},me={key:0,class:"mb-6 rounded-lg border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-sidebar-accent"},pe={class:"mb-4 flex items-center justify-between"},fe={class:"grid gap-4 md:grid-cols-2"},xe={class:"grid gap-2"},ce={class:"grid gap-2"},ge={class:"mt-4 flex justify-end gap-2"},be={key:1,class:"mb-4 flex flex-wrap gap-2"},ve={key:0,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},ye={key:1,class:"inline-flex items-center gap-1 rounded-full bg-primary/10 px-3 py-1 text-xs"},_e={class:"overflow-x-auto"},he={class:"min-w-full divide-y divide-gray-200"},ke={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-sidebar"},we={class:"whitespace-nowrap px-6 py-4 text-sm font-medium"},Ce={class:"whitespace-nowrap px-6 py-4 text-sm"},Fe={class:"whitespace-nowrap px-6 py-4 text-sm font-semibold"},Ae={class:"whitespace-nowrap px-6 py-4 text-sm"},$e={class:"whitespace-nowrap px-6 py-4 text-right"},Ve={class:"flex items-center justify-end gap-2"},Se=["onClick"],De=["onClick"],Te=["onClick"],Ee={key:0,class:"py-12 text-center"},Me=J({__name:"Index",props:{fees:{},grades:{},terms:{},filters:{}},setup(G){const x=G,f=x.fees||[],C=x.grades||[],L=x.terms||[],c=M(!1),a=O({grade:x.filters?.grade||"all",term:x.filters?.term||"all"}),j=[{title:"Dashboard",href:H().url},{title:"Fees",href:"#"}],B=d=>{alert("Edit fee: "+d)},K=d=>{alert("View fee: "+d)},I=d=>{confirm("Are you sure you want to delete this fee?")&&alert("Delete fee: "+d)},U=()=>{alert("Create new fee")},F=d=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(d),q=d=>new Date(d).toLocaleDateString("en-KE",{year:"numeric",month:"short",day:"numeric"}),h=()=>{const d={};a.grade&&a.grade!=="all"&&(d.grade=a.grade),a.term&&a.term!=="all"&&(d.term=a.term),V.get("/fees",d,{preserveState:!1,preserveScroll:!1,only:["fees","filters"]})},A=()=>{a.grade="all",a.term="all",V.get("/fees",{},{preserveState:!1,preserveScroll:!1})},b=P(()=>!!(a.grade&&a.grade!=="all"||a.term&&a.term!=="all")),z=f.reduce((d,e)=>d+parseFloat(e.amount||0),0),R=[...new Set(f.map(d=>d.term))].length;return[...new Set(f.map(d=>d.grade_id))].length,(d,e)=>(i(),u(y,null,[l(r(Q),{title:"Fees"}),l(X,{breadcrumbs:j},{default:o(()=>[t("div",Y,[t("div",Z,[t("div",ee,[e[6]||(e[6]=t("div",{class:"text-sm font-medium text-muted-foreground"},"Total Fee Records",-1)),t("div",te,m(r(f).length),1)]),t("div",re,[e[7]||(e[7]=t("div",{class:"text-sm font-medium text-muted-foreground"},"Total Amount",-1)),t("div",se,m(F(r(z))),1)]),t("div",ae,[e[8]||(e[8]=t("div",{class:"text-sm font-medium text-muted-foreground"},"Active Terms",-1)),t("div",le,m(r(R)),1)])]),t("div",de,[t("div",oe,[t("div",ie,[e[10]||(e[10]=t("h2",{class:"text-xl font-semibold"},"Fee Structure",-1)),t("div",ne,[l(r(g),{variant:"outline",onClick:e[0]||(e[0]=s=>c.value=!c.value),class:"gap-2"},{default:o(()=>[l(r(W),{class:"h-4 w-4"}),e[9]||(e[9]=n(" Filters ",-1)),b.value?(i(),u("span",ue," Active ")):p("",!0)]),_:1}),t("button",{onClick:U,class:"rounded-lg bg-black px-4 py-2 text-sm font-medium text-white hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200"}," + Add Fee ")])]),c.value?(i(),u("div",me,[t("div",pe,[e[12]||(e[12]=t("h3",{class:"font-semibold"},"Filter Fees",-1)),b.value?(i(),v(r(g),{key:0,variant:"ghost",size:"sm",onClick:A,class:"gap-2 text-red-600 hover:text-red-700"},{default:o(()=>[l(r(k),{class:"h-4 w-4"}),e[11]||(e[11]=n(" Clear All ",-1))]),_:1})):p("",!0)]),t("div",fe,[t("div",xe,[l(r(N),null,{default:o(()=>[...e[13]||(e[13]=[n("Grade",-1)])]),_:1}),l(r(S),{modelValue:r(a).grade,"onUpdate:modelValue":e[1]||(e[1]=s=>r(a).grade=s)},{default:o(()=>[l(r(D),null,{default:o(()=>[l(r(T),{placeholder:"All Grades"})]),_:1}),l(r(E),null,{default:o(()=>[l(r(_),{value:"all"},{default:o(()=>[...e[14]||(e[14]=[n("All Grades",-1)])]),_:1}),(i(!0),u(y,null,w(r(C),s=>(i(),v(r(_),{key:s.id,value:s.id.toString()},{default:o(()=>[n(m(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),t("div",ce,[l(r(N),null,{default:o(()=>[...e[15]||(e[15]=[n("Term",-1)])]),_:1}),l(r(S),{modelValue:r(a).term,"onUpdate:modelValue":e[2]||(e[2]=s=>r(a).term=s)},{default:o(()=>[l(r(D),null,{default:o(()=>[l(r(T),{placeholder:"All Terms"})]),_:1}),l(r(E),null,{default:o(()=>[l(r(_),{value:"all"},{default:o(()=>[...e[16]||(e[16]=[n("All Terms",-1)])]),_:1}),(i(!0),u(y,null,w(r(L),s=>(i(),v(r(_),{key:s,value:s},{default:o(()=>[n(m(s),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),t("div",ge,[l(r(g),{variant:"outline",onClick:e[3]||(e[3]=s=>c.value=!1)},{default:o(()=>[...e[17]||(e[17]=[n(" Close ",-1)])]),_:1}),l(r(g),{onClick:h,disabled:r(a).processing},{default:o(()=>[...e[18]||(e[18]=[n(" Apply Filters ",-1)])]),_:1},8,["disabled"])])])):p("",!0),b.value&&!c.value?(i(),u("div",be,[e[19]||(e[19]=t("span",{class:"text-sm text-muted-foreground"},"Active filters:",-1)),r(a).grade&&r(a).grade!=="all"?(i(),u("span",ve,[n(" Grade: "+m(r(C).find(s=>s.id.toString()===r(a).grade)?.name)+" ",1),t("button",{onClick:e[4]||(e[4]=s=>{r(a).grade="all",h()}),class:"hover:text-red-600"},[l(r(k),{class:"h-3 w-3"})])])):p("",!0),r(a).term&&r(a).term!=="all"?(i(),u("span",ye,[n(" Term: "+m(r(a).term)+" ",1),t("button",{onClick:e[5]||(e[5]=s=>{r(a).term="all",h()}),class:"hover:text-red-600"},[l(r(k),{class:"h-3 w-3"})])])):p("",!0)])):p("",!0),t("div",_e,[t("table",he,[e[20]||(e[20]=t("thead",{class:"bg-gray-50 dark:bg-sidebar-accent"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Grade"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Term"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Amount"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Due Date"),t("th",{class:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500 dark:text-gray-400"},"Actions")])],-1)),t("tbody",ke,[(i(!0),u(y,null,w(r(f),s=>(i(),u("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-sidebar-accent"},[t("td",we,m(s.grade?.name||"N/A"),1),t("td",Ce,m(s.term),1),t("td",Fe,m(F(s.amount)),1),t("td",Ae,m(q(s.due_date)),1),t("td",$e,[t("div",Ve,[t("button",{onClick:$=>K(s.id),class:"rounded px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-950"}," View ",8,Se),t("button",{onClick:$=>B(s.id),class:"rounded px-3 py-1 text-sm text-green-600 hover:bg-green-50 dark:text-green-400 dark:hover:bg-green-950"}," Edit ",8,De),t("button",{onClick:$=>I(s.id),class:"rounded px-3 py-1 text-sm text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-950"}," Delete ",8,Te)])])]))),128))])]),r(f).length===0?(i(),u("div",Ee,[e[22]||(e[22]=t("p",{class:"text-muted-foreground"},"No fees found matching your filters.",-1)),b.value?(i(),v(r(g),{key:0,variant:"outline",class:"mt-4",onClick:A},{default:o(()=>[...e[21]||(e[21]=[n(" Clear Filters ",-1)])]),_:1})):p("",!0)])):p("",!0)])])])])]),_:1})],64))}});export{Me as default};
